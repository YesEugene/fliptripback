# –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç—É—Ä—ã

## üìç –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: Supabase (PostgreSQL)

–í—Å–µ —Ç—É—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö **Supabase** –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö:

### 1. –¢–∞–±–ª–∏—Ü–∞ `tours` (–æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—É—Ä–∞—Ö)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—É—Ä–∞
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞
- `city_id` - ID –≥–æ—Ä–æ–¥–∞ (—Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π `cities`)
- `guide_id` - ID –≥–∏–¥–∞/–∫—Ä–µ–∞—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- `is_published` - –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –ª–∏ —Ç—É—Ä (true/false)
- `duration_type` - —Ç–∏–ø –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ('days' –∏–ª–∏ 'hours')
- `duration_value` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π/—á–∞—Å–æ–≤
- `price_pdf` - —Ü–µ–Ω–∞ PDF –≤–µ—Ä—Å–∏–∏
- `preview_media_url` - URL –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –¥–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 2. –¢–∞–±–ª–∏—Ü–∞ `tour_days` (–¥–Ω–∏ —Ç—É—Ä–∞)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–Ω—è
- `tour_id` - ID —Ç—É—Ä–∞ (—Å–≤—è–∑—å —Å `tours`)
- `day_number` - –Ω–æ–º–µ—Ä –¥–Ω—è (1, 2, ...)
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `date_hint` - –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –¥–∞—Ç–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 3. –¢–∞–±–ª–∏—Ü–∞ `tour_blocks` (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –¥–Ω—è)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–ª–æ–∫–∞
- `tour_day_id` - ID –¥–Ω—è (—Å–≤—è–∑—å —Å `tour_days`)
- `start_time` - –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "09:00")
- `end_time` - –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "10:30")
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 4. –¢–∞–±–ª–∏—Ü–∞ `tour_items` (—ç–ª–µ–º–µ–Ω—Ç—ã –±–ª–æ–∫–∞ - –ª–æ–∫–∞—Ü–∏–∏)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞
- `tour_block_id` - ID –±–ª–æ–∫–∞ (—Å–≤—è–∑—å —Å `tour_blocks`)
- `location_id` - ID –ª–æ–∫–∞—Ü–∏–∏ (—Å–≤—è–∑—å —Å `locations`)
- `custom_title` - –∫–∞—Å—Ç–æ–º–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ª–æ–∫–∞—Ü–∏–∏)
- `custom_description` - –∫–∞—Å—Ç–æ–º–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- `custom_recommendations` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- `order_index` - –ø–æ—Ä—è–¥–æ–∫ –≤ –±–ª–æ–∫–µ
- `duration_minutes` - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
- `approx_cost` - –ø—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

### 5. –¢–∞–±–ª–∏—Ü–∞ `tour_tags` (—Ç–µ–≥–∏ —Ç—É—Ä–æ–≤)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `tour_id` - ID —Ç—É—Ä–∞ (—Å–≤—è–∑—å —Å `tours`)
- `tag_id` - ID —Ç–µ–≥–∞ (—Å–≤—è–∑—å —Å `tags`)

### 6. –¢–∞–±–ª–∏—Ü–∞ `locations` (–ª–æ–∫–∞—Ü–∏–∏)
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ª–æ–∫–∞—Ü–∏–∏
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
- `city_id` - ID –≥–æ—Ä–æ–¥–∞
- `address` - –∞–¥—Ä–µ—Å
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è (landmark, museum, restaurant, etc.)
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `recommendations` - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'guide')

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—É—Ä—ã –≤ Supabase

### –°–ø–æ—Å–æ–± 1: Table Editor
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "Table Editor" –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `tours`
4. –í—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç—É—Ä—ã

### –°–ø–æ—Å–æ–± 2: SQL Editor
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
```sql
SELECT id, title, is_published, duration_value, city_id 
FROM tours 
ORDER BY created_at DESC;
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ API
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://fliptripback.vercel.app/api/check-tours
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–¢—É—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:
```
tours (1) 
  ‚îî‚îÄ‚îÄ tour_days (N)
        ‚îî‚îÄ‚îÄ tour_blocks (N)
              ‚îî‚îÄ‚îÄ tour_items (N)
                    ‚îî‚îÄ‚îÄ locations (1)
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –û–¥–∏–Ω —Ç—É—Ä –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
- –û–¥–∏–Ω –¥–µ–Ω—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤
- –û–¥–∏–Ω –±–ª–æ–∫ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–æ–∫–∞—Ü–∏–π (items)
- –ö–∞–∂–¥–∞—è –ª–æ–∫–∞—Ü–∏—è —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `locations`

## üîÑ –û—Ç–ª–∏—á–∏–µ –æ—Ç Redis

- **Supabase (PostgreSQL)**: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Ç—É—Ä–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫—Ä–µ–∞—Ç–æ—Ä–∞–º–∏
- **Redis (Upstash)**: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–æ–π –º–∞—Ä—à—Ä—É—Ç–æ–≤ (—Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è - 1 –º–µ—Å—è—Ü)

## ‚úÖ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `/api/generate-sample-tours`:
- ‚úÖ 10 —Ç—É—Ä–æ–≤ —Å–æ–∑–¥–∞–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü–µ `tours`
- ‚úÖ –í—Å–µ —Ç—É—Ä—ã –∏–º–µ—é—Ç `is_published = true`
- ‚úÖ –ö–∞–∂–¥—ã–π —Ç—É—Ä –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ (1-2 –¥–Ω—è) –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `tour_days`, `tour_blocks`, `tour_items`
- ‚úÖ –õ–æ–∫–∞—Ü–∏–∏ —Å–≤—è–∑–∞–Ω—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `locations` (80 –ª–æ–∫–∞—Ü–∏–π)

